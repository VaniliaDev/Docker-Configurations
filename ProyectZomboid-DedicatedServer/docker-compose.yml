services:
  projectzomboid:
    image: indifferentbroccoli/projectzomboid-server-docker
    restart: unless-stopped
    container_name: projectzomboid
    stop_grace_period: 30s
    ports:
      - 16261:16261/udp
      - 16262:16262/udp
      - 27015:27015/tcp
    env_file:
      - .env
    volumes:
      - ./server-files:/project-zomboid
      - ./server-data:/project-zomboid-config

  # playit tunnel agent â€” en el dashboard de playit.gg configurar los tunnels apuntando a:
  #   projectzomboid:16261 (UDP) y projectzomboid:16262 (UDP)
  # NO usar network_mode: host porque no funciona en Docker Desktop para Windows.
  playit:
    image: ghcr.io/playit-cloud/playit-agent:0.17
    restart: unless-stopped
    depends_on:
      - projectzomboid
    environment:
      - SECRET_KEY=yoursecretkey
